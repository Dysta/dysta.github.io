<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Une API pour RPG Paradize ? | Dysta's Lair</title>
<meta name=keywords content><meta name=description content="Mise en contexte
Bonjour à tous ! Pour ce premier post sur mon blog j&rsquo;aimerais vous partager un petit bout de code que j&rsquo;avais fait il y a un moment.
Certains d&rsquo;entre vous l&rsquo;ont utilisé, mais pas tous. Il est également inclus dans mon CMS privé PantyCMS afin de récupérer des statistiques sur RPG.
Ce petit bout de code permet de parser une page RPG afin de récupérer les infos suivantes :"><meta name=author content="Dysta"><link rel=canonical href=https://dysta.github.io/posts/api-rpg-paradize/><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://dysta.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://dysta.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://dysta.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://dysta.github.io/apple-touch-icon.png><link rel=mask-icon href=https://dysta.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://dysta.github.io/posts/api-rpg-paradize/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://dysta.github.io/posts/api-rpg-paradize/"><meta property="og:site_name" content="Dysta's Lair"><meta property="og:title" content="Une API pour RPG Paradize ?"><meta property="og:description" content="Mise en contexte Bonjour à tous ! Pour ce premier post sur mon blog j’aimerais vous partager un petit bout de code que j’avais fait il y a un moment.
Certains d’entre vous l’ont utilisé, mais pas tous. Il est également inclus dans mon CMS privé PantyCMS afin de récupérer des statistiques sur RPG.
Ce petit bout de code permet de parser une page RPG afin de récupérer les infos suivantes :"><meta property="og:locale" content="fr-fr"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-02-10T12:00:00+01:00"><meta property="article:modified_time" content="2021-02-10T12:00:00+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Une API pour RPG Paradize ?"><meta name=twitter:description content="Mise en contexte
Bonjour à tous ! Pour ce premier post sur mon blog j&rsquo;aimerais vous partager un petit bout de code que j&rsquo;avais fait il y a un moment.
Certains d&rsquo;entre vous l&rsquo;ont utilisé, mais pas tous. Il est également inclus dans mon CMS privé PantyCMS afin de récupérer des statistiques sur RPG.
Ce petit bout de code permet de parser une page RPG afin de récupérer les infos suivantes :"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://dysta.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Une API pour RPG Paradize ?","item":"https://dysta.github.io/posts/api-rpg-paradize/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Une API pour RPG Paradize ?","name":"Une API pour RPG Paradize ?","description":"Mise en contexte Bonjour à tous ! Pour ce premier post sur mon blog j\u0026rsquo;aimerais vous partager un petit bout de code que j\u0026rsquo;avais fait il y a un moment.\nCertains d\u0026rsquo;entre vous l\u0026rsquo;ont utilisé, mais pas tous. Il est également inclus dans mon CMS privé PantyCMS afin de récupérer des statistiques sur RPG.\nCe petit bout de code permet de parser une page RPG afin de récupérer les infos suivantes :\n","keywords":[],"articleBody":"Mise en contexte Bonjour à tous ! Pour ce premier post sur mon blog j’aimerais vous partager un petit bout de code que j’avais fait il y a un moment.\nCertains d’entre vous l’ont utilisé, mais pas tous. Il est également inclus dans mon CMS privé PantyCMS afin de récupérer des statistiques sur RPG.\nCe petit bout de code permet de parser une page RPG afin de récupérer les infos suivantes :\nvaleur out le nom le nombre de vote la position dans le classement le graphe RPG (voir plus bas) J’ai réalisé ce petit bout de code lorsque je codais la partie admin de mon CMS Dofus. J’ai réalisé qu’avoir un récapitulatif automatique et précis de RPG Paradize directement dans le panel admin donnait une réelle plus value.\nCode Lorsque j’ai réalisé le code, je l’ai fais en PHP pour rester sur la même stack technique que le CMS et donc, faciliter son intégration. Cependant, il est facilement convertissable dans un autre langage comme Python ou Javascript (merci ChatGPT).\nJ’ai conscience que le code n’est pas des plus PHPiste qui existe étant donné mon niveau relativement basique dans le langage. Le code est donc prompt a diverses optimisation.\nInitialisation 1 2 3 4 5 6 7 \u003c?php class RpgApi { public function __construct($id) { $this-\u003eid = $id; } } ?\u003e On commence par créer notre object RpgApi en lui fournissant simplement l’id de notre page. Pour rappel, l’id de la page se trouve à la fin de l’url. Par exemple, l’url https://www.rpg-paradize.com/site-Fun-Zandix+2.10-101961, l’id sera 101961. Notez également que tout ce qui se situe entre le site- et -101961 est inutile et peu être enlevé. Ainsi, l’url https://www.rpg-paradize.com/site–101961 est valide !\nNous pouvons donc initialiser notre api de cette façon :\n1 $RPG = new RpgApi(101961); Récupérer le nombre de vote Lorsque notre objet RpgApi est initialisé, il nous permet de récupérer de manière très simple le nombre de vote grace à la fonction publique getVote().\n1 2 3 4 5 6 7 8 9 10 11 12 13 /** * Return RPG vote * @return int vote number */ public function getVote() { if (empty($this-\u003ewebContent)) $this-\u003egetWebContent(); if (empty($this-\u003evotes)) $this-\u003eparseVote(); return $this-\u003evotes; } Cette méthode est en plusieurs temps. Elle va d’abord récupérer le HTML de la page grâce à la fonction privé getWebContent() pour ensuite parser le nombre de vote via la fonction parseVote(). La méthode qui permet de parser le nombre de vote n’est pas très compliqué. Elle repose sur une simple regEx qu’on applique sur le HTML récupéré.\n1 2 3 4 private function parseVote() { preg_match('/Vote : (.*?)\u003c\\/a\u003e/', $this-\u003ewebContent, $vote); $this-\u003evotes = $vote[1]; } Le principe est similaire pour les autres méthodes à l’exception de parseGraph().\nNous pouvons donc ajouter à notre petit bout de code d’exemple le nombre de vote !\n1 2 3 4 $RPG = new RpgApi(101961); $vote = $RPG-\u003egetVote(); echo \" Vote : \" . vote . \"\n\"; Ici le nombre de vote est affiché dans une balise paragraphe. Pour récupérer d’autres info comme l’url ou le nombre de out, le principe est le même.\nRécuperation du code HTML Comme dit précédemment, le code HTML est récupéré via la fonction getWebContent(). Cette fonction est appelée en interne et utilise le module PHP curl.\n1 2 3 4 5 6 7 8 9 10 11 12 13 private function getWebContent() { $opts = array( CURLOPT_URL =\u003e 'http://rpg-paradize.com/site--' . $this-\u003eid, CURLOPT_HEADER =\u003e true, CURLOPT_RETURNTRANSFER =\u003e true, CURLOPT_CONNECTTIMEOUT =\u003e 3, CURLOPT_USERAGENT =\u003e 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.135 Safari/537.36 Edge/12.246' ); $ch = curl_init(); curl_setopt_array($ch, $opts); $this-\u003ewebContent = curl_exec($ch); curl_close($ch); } Je commence par initialiser un tableau avec tous mes paramètres CURL. Le nom des paramètres est défini par le module curl lui même. On peut voir que j’ai utilisé la méthode de supprimer l’intérieur de l’url afin d’être certain de tomber sur la bonne page. On continue en définissant un header et des user-agents afin que notre requête soit le moins suspecte possible. Puis on initialise notre objet curl en lui donnant les paramètres et en envoyant la requête.\nNotez que dans chaque fonction get*(), un if est effectué sur le contenu du HTML afin de ne le récupérer qu’une seule fois et non à chaque fois que nous voulons récupérer une info comme ici sur getName() qui possède une structure similaire à getVote().\n1 2 3 4 5 6 7 8 9 10 11 12 13 /** * * Return RPG name * @return string name */ public function getName() { if (empty($this-\u003ewebContent)) $this-\u003egetWebContent(); if (empty($this-\u003ename)) $this-\u003eparseName(); return $this-\u003ename; } Si vous voulez donc rafraîchir les données contenu dans votre objet rpg, vous devez le recréer. Notez qu’une fonction permettant de rafraîchir le contenu n’est pas réellement nécessaire vu que le site met à jour les données que toutes les 3 heures environs. Cependant, cela reste possible de cette manière :\n1 2 3 4 5 6 7 8 9 10 11 $RPG = new RpgApi(101961); $vote = $RPG-\u003egetVote(); echo \" Vote : \" . vote . \"\n\"; // many treatment... // we want to refresh data $RPG = new RpgApi(101961); $vote = $RPG-\u003egetVote(); echo \" Vote : \" . vote . \"\n\"; // will be an another number Graphe Comme dit plus haut, ce petit script permet de récupérer le graphe RPG. Enfin.. il ne récupère pas le graphe en lui-même sinon ça serait beaucoup trop compliqué et très peu modulable. Il récupère simplement les données servant à construire le graphe sur RPG, à savoir, la date d’un jour et le nombre de vote correspondant à ce jour. De cette manière, vous êtes libres d’utiliser n’importe quelle bibliothèque de votre choix afin de construire le graphe comme bon vous sembles.\nEn effet, RPG Paradize utilise la bibliothèque Char.js pour générer ses graphes. Le fait de récupérer seulement les données nous permet d’utiliser une autre bibliothèque pour construire le graphe. Dans le screen ci-dessous, j’ai utilisé la bibliothèque Morris.js afin d’inclure le graphe RPG dans un panel admin..\nFig.1 – PantyCMS – Panel admin utilisant Morris.js pour générer le graphe Fig.2 – RPG Paradize – Graphe d’origine généré avec Chart.js Récupération des infos La récupération des infos du graphe se fait dans la fonction parseGraph(). Cette fonction construit un tableau de la forme suivante :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 [ \"key_id\" = { \"date\": \"YYYY-MM-DD\", \"vote\": 5 }, \"key_id\" = { \"date\": \"YYYY-MM-DD\", \"vote\": 9 }, \"key_id\" = { \"date\": \"YYYY-MM-DD\", \"vote\": 13 }, // ... ] Dans un premier temps, je fais comme les autres méthodes. j’applique une regEx sur le contenu HTML afin d’extraire une énorme string contenant les labels (les dates) et la data (les votes) puis je crée un tableau en séparant la string via les virgules entre chaque donnée.\n1 2 3 4 preg_match('/labels : \\[(.*?)\\]/',$this-\u003ewebContent, $label); preg_match('/data : \\[(.*?)\\]/', $this-\u003ewebContent, $data); $array_label = explode(\",\", $label[1]); $array_data = explode(\",\", $data[1]); Dans le tableau des dates, chaque date est entouré de double quote. Il faut les enlever.\n1 2 foreach($array_label as $k =\u003e $v) $array_label[$k] = substr($v, 1, -1); Je peux ensuite crée le tableau final qui contient la donnée des labels nettoyé en lui associant le bon nombre de vote\n1 2 3 4 5 $this-\u003egraph = array(); foreach ($array_label as $k =\u003e $v) { $this-\u003egraph[$k]['date'] = $array_label[$k]; $this-\u003egraph[$k]['vote'] = $array_data[$k]; } C’est ce tableau qui sera retourné à l’utilisateur lorsqu’il appellera la fonction getGraph().\n1 2 3 4 5 6 7 8 9 10 11 12 13 /** * Return RPG graph data * @return array RPG graph data as array('date', 'votes') */ public function getGraph() { if (empty($this-\u003ewebContent)) $this-\u003egetWebContent(); if (empty($this-\u003egraph)) $this-\u003eparseGraph(); return $this-\u003egraph; } Exemples Les nombreux bout de code présent dans ce billet sont tirés du dossier exemple du repos GitHub disponible ici\nMerci de votre lecture et à une prochaine ! 👋\n","wordCount":"1315","inLanguage":"en","datePublished":"2021-02-10T12:00:00+01:00","dateModified":"2021-02-10T12:00:00+01:00","author":{"@type":"Person","name":"Dysta"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://dysta.github.io/posts/api-rpg-paradize/"},"publisher":{"@type":"Organization","name":"Dysta's Lair","logo":{"@type":"ImageObject","url":"https://dysta.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://dysta.github.io/ accesskey=h title="Dysta's Lair (Alt + H)">Dysta's Lair</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://dysta.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://dysta.github.io/posts/ title=Blog><span>Blog</span></a></li><li><a href=https://dysta.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://dysta.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://dysta.github.io/cv/ title="Curriculum Vitae"><span>Curriculum Vitae</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://dysta.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://dysta.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Une API pour RPG Paradize ?</h1><div class=post-meta><span title='2021-02-10 12:00:00 +0100 +0100'>February 10, 2021</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Dysta</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#mise-en-contexte aria-label="Mise en contexte">Mise en contexte</a></li><li><a href=#code aria-label=Code>Code</a><ul><li><a href=#initialisation aria-label=Initialisation>Initialisation</a></li><li><a href=#r%c3%a9cup%c3%a9rer-le-nombre-de-vote aria-label="Récupérer le nombre de vote">Récupérer le nombre de vote</a></li><li><a href=#r%c3%a9cuperation-du-code-html aria-label="Récuperation du code HTML">Récuperation du code HTML</a></li></ul></li><li><a href=#graphe aria-label=Graphe>Graphe</a><ul><li><a href=#r%c3%a9cup%c3%a9ration-des-infos aria-label="Récupération des infos">Récupération des infos</a></li></ul></li><li><a href=#exemples aria-label=Exemples>Exemples</a></li></ul></div></details></div><div class=post-content><h1 id=mise-en-contexte>Mise en contexte<a hidden class=anchor aria-hidden=true href=#mise-en-contexte>#</a></h1><p>Bonjour à tous ! Pour ce premier post sur mon blog j&rsquo;aimerais vous partager un petit bout de code que j&rsquo;avais fait il y a un moment.</p><p>Certains d&rsquo;entre vous l&rsquo;ont utilisé, mais pas tous. Il est également inclus dans mon CMS privé <a href=https://github.com/Dysta/Panty><em>PantyCMS</em></a> afin de récupérer des statistiques sur RPG.</p><p>Ce petit bout de code permet de <strong>parser</strong> une page RPG afin de récupérer les infos suivantes :</p><ul><li>valeur out</li><li>le nom</li><li>le nombre de vote</li><li>la position dans le classement</li><li>le graphe RPG (voir plus bas)</li></ul><p>J&rsquo;ai réalisé ce petit bout de code lorsque je codais la partie admin de mon CMS Dofus. J&rsquo;ai réalisé qu&rsquo;avoir un récapitulatif automatique et précis de RPG Paradize directement dans le panel admin donnait une réelle plus value.</p><h1 id=code>Code<a hidden class=anchor aria-hidden=true href=#code>#</a></h1><p>Lorsque j&rsquo;ai réalisé le code, je l&rsquo;ai fais en PHP pour rester sur la même stack technique que le CMS et donc, faciliter son intégration.
Cependant, il est facilement convertissable dans un autre langage comme Python ou Javascript (merci ChatGPT).</p><p>J&rsquo;ai conscience que le code n&rsquo;est pas des plus PHPiste qui existe étant donné mon niveau relativement basique dans le langage. Le code est donc prompt a diverses optimisation.</p><h2 id=initialisation>Initialisation<a hidden class=anchor aria-hidden=true href=#initialisation>#</a></h2><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>RpgApi</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> __construct($id) {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>id</span> <span style=color:#f92672>=</span> $id;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></td></tr></table></div></div><p>On commence par créer notre object RpgApi en lui fournissant simplement l&rsquo;id de notre page. Pour rappel, l&rsquo;id de la page se trouve à la fin de l&rsquo;url.<br>Par exemple, l&rsquo;url <a href=https://www.rpg-paradize.com/site-Fun-Zandix+2.10-101961>https://www.rpg-paradize.com/site-Fun-Zandix+2.10-101961</a>, l&rsquo;id sera <strong>101961</strong>.<br>Notez également que tout ce qui se situe entre le <code>site-</code> et <code>-101961</code> est inutile et peu être enlevé.
Ainsi, l&rsquo;url <a href=https://www.rpg-paradize.com/site--101961>https://www.rpg-paradize.com/site&ndash;101961</a> est valide !</p><p>Nous pouvons donc initialiser notre api de cette façon :</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span>$RPG <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>RpgApi</span>(<span style=color:#ae81ff>101961</span>);
</span></span></code></pre></td></tr></table></div></div><h2 id=récupérer-le-nombre-de-vote>Récupérer le nombre de vote<a hidden class=anchor aria-hidden=true href=#récupérer-le-nombre-de-vote>#</a></h2><p>Lorsque notre objet RpgApi est initialisé, il nous permet de récupérer de manière très simple le nombre de vote grace à la fonction publique <code>getVote()</code>.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span> <span style=color:#e6db74>/**
</span></span></span><span style=display:flex><span><span style=color:#e6db74> * Return RPG vote
</span></span></span><span style=display:flex><span><span style=color:#e6db74> * @return int vote number
</span></span></span><span style=display:flex><span><span style=color:#e6db74> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getVote</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>empty</span>($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>webContent</span>))
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getWebContent</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>empty</span>($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>votes</span>)) 
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>parseVote</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>votes</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Cette méthode est en plusieurs temps. Elle va d&rsquo;abord récupérer le HTML de la page grâce à la fonction privé <code>getWebContent()</code> pour ensuite <em>parser</em> le nombre de vote via la fonction <code>parseVote()</code>.<br>La méthode qui permet de parser le nombre de vote n&rsquo;est pas très compliqué. Elle repose sur une simple regEx qu&rsquo;on applique sur le HTML récupéré.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>parseVote</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>preg_match</span>(<span style=color:#e6db74>&#39;/Vote : (.*?)&lt;\/a&gt;/&#39;</span>, $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>webContent</span>, $vote);
</span></span><span style=display:flex><span>    $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>votes</span> <span style=color:#f92672>=</span> $vote[<span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Le principe est similaire pour les autres méthodes à l&rsquo;exception de <code>parseGraph()</code>.</p><p>Nous pouvons donc ajouter à notre petit bout de code d&rsquo;exemple le nombre de vote !</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span>$RPG <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>RpgApi</span>(<span style=color:#ae81ff>101961</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$vote <span style=color:#f92672>=</span> $RPG<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getVote</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;p&gt; Vote : &#34;</span> <span style=color:#f92672>.</span> <span style=color:#a6e22e>vote</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;&lt;/p&gt;&#34;</span>;
</span></span></code></pre></td></tr></table></div></div><p>Ici le nombre de vote est affiché dans une balise paragraphe. Pour récupérer d&rsquo;autres info comme l&rsquo;url ou le nombre de out, le principe est le même.</p><h2 id=récuperation-du-code-html>Récuperation du code HTML<a hidden class=anchor aria-hidden=true href=#récuperation-du-code-html>#</a></h2><p>Comme dit précédemment, le code HTML est récupéré via la fonction <code>getWebContent()</code>. Cette fonction est appelée en interne et utilise le module PHP <code>curl</code>.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getWebContent</span>() {
</span></span><span style=display:flex><span>    $opts <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>CURLOPT_URL</span>             <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;http://rpg-paradize.com/site--&#39;</span> <span style=color:#f92672>.</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>id</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>CURLOPT_HEADER</span>          <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>CURLOPT_RETURNTRANSFER</span>  <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>CURLOPT_CONNECTTIMEOUT</span>  <span style=color:#f92672>=&gt;</span> <span style=color:#ae81ff>3</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>CURLOPT_USERAGENT</span>       <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.135 Safari/537.36 Edge/12.246&#39;</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>    $ch <span style=color:#f92672>=</span> <span style=color:#a6e22e>curl_init</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>curl_setopt_array</span>($ch, $opts);
</span></span><span style=display:flex><span>    $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>webContent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>curl_exec</span>($ch);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>curl_close</span>($ch);
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Je commence par initialiser un tableau avec tous mes paramètres CURL. Le nom des paramètres est défini par le module curl lui même. On peut voir que j&rsquo;ai utilisé la méthode de supprimer l&rsquo;intérieur de l&rsquo;url afin d&rsquo;être certain de tomber sur la bonne page.<br>On continue en définissant un header et des user-agents afin que notre requête soit le moins suspecte possible. Puis on initialise notre objet curl en lui donnant les paramètres et en envoyant la requête.</p><p>Notez que dans chaque fonction <code>get*()</code>, un <em>if</em> est effectué sur le contenu du HTML afin de ne le récupérer qu&rsquo;une seule fois et non à chaque fois que nous voulons récupérer une info comme ici sur <code>getName()</code> qui possède une structure similaire à <code>getVote()</code>.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span><span style=color:#e6db74>/**
</span></span></span><span style=display:flex><span><span style=color:#e6db74> * * Return RPG name
</span></span></span><span style=display:flex><span><span style=color:#e6db74> * @return string name
</span></span></span><span style=display:flex><span><span style=color:#e6db74> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getName</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>empty</span>($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>webContent</span>))
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getWebContent</span>();
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>empty</span>($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>name</span>))
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>parseName</span>();
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>name</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Si vous voulez donc rafraîchir les données contenu dans votre objet rpg, vous devez le recréer. Notez qu&rsquo;une fonction permettant de rafraîchir le contenu n&rsquo;est pas réellement nécessaire vu que le site met à jour les données que toutes les 3 heures environs.
Cependant, cela reste possible de cette manière :</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span>$RPG <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>RpgApi</span>(<span style=color:#ae81ff>101961</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$vote <span style=color:#f92672>=</span> $RPG<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getVote</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;p&gt; Vote : &#34;</span> <span style=color:#f92672>.</span> <span style=color:#a6e22e>vote</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;&lt;/p&gt;&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// many treatment...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// we want to refresh data
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$RPG <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>RpgApi</span>(<span style=color:#ae81ff>101961</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$vote <span style=color:#f92672>=</span> $RPG<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getVote</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;&lt;p&gt; Vote : &#34;</span> <span style=color:#f92672>.</span> <span style=color:#a6e22e>vote</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;&lt;/p&gt;&#34;</span>; <span style=color:#75715e>// will be an another number
</span></span></span></code></pre></td></tr></table></div></div><h1 id=graphe>Graphe<a hidden class=anchor aria-hidden=true href=#graphe>#</a></h1><p>Comme dit plus haut, ce petit script permet de récupérer le graphe RPG. Enfin.. il ne récupère pas le graphe en lui-même sinon ça serait beaucoup trop compliqué et très peu modulable.
Il récupère simplement les données servant à construire le graphe sur RPG, à savoir, la date d&rsquo;un jour et le nombre de vote correspondant à ce jour. De cette manière, vous êtes libres d&rsquo;utiliser n&rsquo;importe quelle bibliothèque de votre choix afin de construire le graphe comme bon vous sembles.</p><p>En effet, <em>RPG Paradize</em> utilise la bibliothèque <a href=https://www.chartjs.org/>Char.js</a> pour générer ses graphes. Le fait de récupérer seulement les données nous permet d&rsquo;utiliser une autre bibliothèque pour construire le graphe. Dans le screen ci-dessous, j&rsquo;ai utilisé la bibliothèque <a href=https://morrisjs.github.io/morris.js/>Morris.js</a> afin d&rsquo;inclure le graphe RPG dans un panel admin..</p><table><thead><tr><th style=text-align:right><img alt=PCA loading=lazy src=https://cdn.discordapp.com/attachments/573225654452092930/809038148763910184/unknown.png title="Panel admin utilisant Morris.js pour générer le graphe"></th></tr></thead><tbody><tr><td style=text-align:right>Fig.1 &ndash; PantyCMS &ndash; Panel admin utilisant Morris.js pour générer le graphe</td></tr></tbody></table><table><thead><tr><th style=text-align:right><img alt=RPG loading=lazy src=https://cdn.discordapp.com/attachments/573225654452092930/809038370167586846/unknown.png></th></tr></thead><tbody><tr><td style=text-align:right>Fig.2 &ndash; RPG Paradize &ndash; Graphe d&rsquo;origine généré avec Chart.js</td></tr></tbody></table><h2 id=récupération-des-infos>Récupération des infos<a hidden class=anchor aria-hidden=true href=#récupération-des-infos>#</a></h2><p>La récupération des infos du graphe se fait dans la fonction <code>parseGraph()</code>. Cette fonction construit un tableau de la forme suivante :</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span>[
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;key_id&#34;</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;date&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;YYYY-MM-DD&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;vote&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;key_id&#34;</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;date&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;YYYY-MM-DD&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;vote&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>9</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;key_id&#34;</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;date&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;YYYY-MM-DD&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;vote&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>13</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>]
</span></span></code></pre></td></tr></table></div></div><p>Dans un premier temps, je fais comme les autres méthodes. j&rsquo;applique une regEx sur le contenu HTML afin d&rsquo;extraire une énorme string contenant les labels (les dates) et la data (les votes) puis je crée un tableau en séparant la string via les virgules entre chaque donnée.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span><span style=color:#a6e22e>preg_match</span>(<span style=color:#e6db74>&#39;/labels : \[(.*?)\]/&#39;</span>,$this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>webContent</span>, $label);
</span></span><span style=display:flex><span><span style=color:#a6e22e>preg_match</span>(<span style=color:#e6db74>&#39;/data : \[(.*?)\]/&#39;</span>, $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>webContent</span>, $data);
</span></span><span style=display:flex><span>$array_label <span style=color:#f92672>=</span> <span style=color:#a6e22e>explode</span>(<span style=color:#e6db74>&#34;,&#34;</span>, $label[<span style=color:#ae81ff>1</span>]);
</span></span><span style=display:flex><span>$array_data <span style=color:#f92672>=</span> <span style=color:#a6e22e>explode</span>(<span style=color:#e6db74>&#34;,&#34;</span>, $data[<span style=color:#ae81ff>1</span>]);
</span></span></code></pre></td></tr></table></div></div><p>Dans le tableau des dates, chaque date est entouré de double quote. Il faut les enlever.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span><span style=color:#66d9ef>foreach</span>($array_label <span style=color:#66d9ef>as</span> $k <span style=color:#f92672>=&gt;</span> $v)
</span></span><span style=display:flex><span>    $array_label[$k] <span style=color:#f92672>=</span> <span style=color:#a6e22e>substr</span>($v, <span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>);
</span></span></code></pre></td></tr></table></div></div><p>Je peux ensuite crée le tableau final qui contient la donnée des labels nettoyé en lui associant le bon nombre de vote</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span>$this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>graph</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>foreach</span> ($array_label <span style=color:#66d9ef>as</span> $k <span style=color:#f92672>=&gt;</span> $v) {
</span></span><span style=display:flex><span>    $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>graph</span>[$k][<span style=color:#e6db74>&#39;date&#39;</span>] <span style=color:#f92672>=</span> $array_label[$k];
</span></span><span style=display:flex><span>    $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>graph</span>[$k][<span style=color:#e6db74>&#39;vote&#39;</span>] <span style=color:#f92672>=</span> $array_data[$k];
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>C&rsquo;est ce tableau qui sera retourné à l&rsquo;utilisateur lorsqu&rsquo;il appellera la fonction <code>getGraph()</code>.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span><span style=color:#e6db74>/**
</span></span></span><span style=display:flex><span><span style=color:#e6db74> * Return RPG graph data
</span></span></span><span style=display:flex><span><span style=color:#e6db74> * @return array RPG graph data as array(&#39;date&#39;, &#39;votes&#39;)
</span></span></span><span style=display:flex><span><span style=color:#e6db74> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getGraph</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>empty</span>($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>webContent</span>))
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getWebContent</span>();
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>empty</span>($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>graph</span>)) 
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>parseGraph</span>();
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>graph</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h1 id=exemples>Exemples<a hidden class=anchor aria-hidden=true href=#exemples>#</a></h1><p>Les nombreux bout de code présent dans ce billet sont tirés du dossier exemple du repos GitHub disponible <a href=https://github.com/Dysta/RpgApi/tree/master/examples>ici</a></p><hr><p>Merci de votre lecture et à une prochaine ! 👋</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://dysta.github.io/posts/premiere-exp-pro/><span class=title>« Prev</span><br><span>Ma première expérience professionnel</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Une API pour RPG Paradize ? on x" href="https://x.com/intent/tweet/?text=Une%20API%20pour%20RPG%20Paradize%20%3f&amp;url=https%3a%2f%2fdysta.github.io%2fposts%2fapi-rpg-paradize%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Une API pour RPG Paradize ? on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fdysta.github.io%2fposts%2fapi-rpg-paradize%2f&amp;title=Une%20API%20pour%20RPG%20Paradize%20%3f&amp;summary=Une%20API%20pour%20RPG%20Paradize%20%3f&amp;source=https%3a%2f%2fdysta.github.io%2fposts%2fapi-rpg-paradize%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Une API pour RPG Paradize ? on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fdysta.github.io%2fposts%2fapi-rpg-paradize%2f&title=Une%20API%20pour%20RPG%20Paradize%20%3f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Une API pour RPG Paradize ? on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fdysta.github.io%2fposts%2fapi-rpg-paradize%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Une API pour RPG Paradize ? on whatsapp" href="https://api.whatsapp.com/send?text=Une%20API%20pour%20RPG%20Paradize%20%3f%20-%20https%3a%2f%2fdysta.github.io%2fposts%2fapi-rpg-paradize%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Une API pour RPG Paradize ? on telegram" href="https://telegram.me/share/url?text=Une%20API%20pour%20RPG%20Paradize%20%3f&amp;url=https%3a%2f%2fdysta.github.io%2fposts%2fapi-rpg-paradize%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Une API pour RPG Paradize ? on ycombinator" href="https://news.ycombinator.com/submitlink?t=Une%20API%20pour%20RPG%20Paradize%20%3f&u=https%3a%2f%2fdysta.github.io%2fposts%2fapi-rpg-paradize%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://dysta.github.io/>Dysta's Lair</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>